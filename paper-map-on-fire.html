<link rel="import" href="../firebase-element/firebase-element.html">
<link rel="import" href="../google-map/google-map.html">

<polymer-element name="paper-map-on-fire" attributes="url centering">
    <template>
        <link rel="stylesheet" href="paper-map-on-fire.css">

        <!-- Firebase Element -->
        <firebase-element location="{{ url }}" data="{{ data }}" keys="{{ keys }}" dataready id="base"></firebase-element>
        
        <google-map longitude="{{ centering|LatLngTolongitude }}" latitude="{{ centering|LatLngTolatitude }}" id="google_map">
          <template repeat="{{x in keys}}">
            <template if="{{data[x].LatLng}}">
              <google-map-marker longitude="{{ data[x].LatLng|LatLngTolongitude }}" latitude="{{ data[x].LatLng|LatLngTolatitude }}" title="{{data[x].value}}"></google-map-marker>
            </template>
          </template>
        </google-map>
    </template>

    <script>
    Polymer({
        data: null,
        keys: null,
        LatLngTolongitude: function(value) {
            return +value.split(',')[1];
        },
        LatLngTolatitude: function(value) {
            return +value.split(',')[0];
        }
    });
    </script>

</polymer-element>
